<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>Mavi Tüylü Mini Canavar – Canvas/JS</title>
<meta name="theme-color" content="#0c1424">
<style>
  :root{
    --bg1:#0c1424; --bg2:#182542;
  }
  html,body{height:100%;margin:0}
  body{
    background: radial-gradient(1200px 800px at 70% 10%, var(--bg2), var(--bg1));
    font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    overflow:hidden; color:#eaf4ff;
  }
  #c{
    position:fixed; inset:0; width:100%; height:100%;
    display:block; touch-action:manipulation; cursor:pointer;
  }
  .credit{
    position:fixed; right:14px; bottom:12px; z-index:10;
    font-size:12.5px; opacity:.95;
    background: rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.14);
    padding:6px 10px; border-radius:10px; backdrop-filter:blur(6px);
  }
  .hint{
    position:fixed; left:14px; top:12px; z-index:10; font-size:13px;
    background: rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.14);
    padding:8px 12px; border-radius:12px; backdrop-filter: blur(6px);
  }
  @media (max-width:520px){ .hint{ display:none } }
</style>
</head>
<body>
<canvas id="c"></canvas>
<div class="hint">🩵 dokun / tıkla: kalpler</div>
<div class="credit">emrullahaydogdu design</div>

<script>
/* ===========================================================
   Mavi Tüylü Mini Canavar – Canvas/JS (procedural fur)
   Özellikler:
   - Binlerce kıl (hair) – noise ile salınım
   - Göz kırpma, pupil takibi, nefes animasyonu
   - Tıklayınca kalp parçacıkları
   - Mobil/masaüstü otomatik performans ayarı
   =========================================================== */

const canvas = document.getElementById('c');
const ctx = canvas.getContext('2d');

// Retina ölçek
function fit() {
  const dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
  canvas.width  = Math.floor(innerWidth  * dpr);
  canvas.height = Math.floor(innerHeight * dpr);
  canvas.style.width  = '100%';
  canvas.style.height = '100%';
  ctx.setTransform(dpr,0,0,dpr,0,0);
}
addEventListener('resize', fit, {passive:true});
fit();

// Sahne merkez ve temel ölçüler
function sceneSize(){
  const s = Math.min(innerWidth, innerHeight) * 0.75;
  return {
    cx: innerWidth/2,
    cy: innerHeight/2 + s*0.02, // hafif aşağı
    R:  s*0.36,                 // gövde yarıçap
  };
}

// Basit hızlı “noise” (sin karışımı) – GPU/CPU yormaz
function fnoise(x, y, t=0){
  return (
    Math.sin(1.25*x + 0.9*y + 0.7*t) +
    Math.sin(0.5*x - 1.7*y + 1.3*t) * 0.5 +
    Math.sin(1.9*x + 1.3*y - 0.6*t) * 0.35
  ) * 0.5;
}

// Palet
const col = {
  furDark : '#0e5a98',
  furMid  : '#1aa1ff',
  furLite : '#91d9ff',
  skin    : '#46c1ff',
  eye     : '#0c223a',
  white   : '#eaf6ff',
  pink    : 'rgba(255,132,176,.5)'
};

// Kıl sayısı cihaz gücüne göre
const isMobile = /Mobi|Android/i.test(navigator.userAgent);
const HAIR_COUNT_RING = isMobile ? 1600 : 4200;   // halka kılları
const HAIR_COUNT_CENTER= isMobile ? 600  : 1600;  // merkez çevresi kıllar
const HAIR_LEN = isMobile ? 38 : 55;

// Kalpler
const hearts = [];
function spawnHeart(x,y){
  hearts.push({
    x,y, r: 9 + Math.random()*4,
    vx: (Math.random()*1 - .5) * 0.7,
    vy: - (0.8 + Math.random()*0.5),
    life: 1
  });
}

// Göz parametreleri
let blinkTimer = 0, blinkInterval = 2.8; // s
function eyeScaleY(dt){
  blinkTimer += dt;
  if (blinkTimer > blinkInterval){
    blinkTimer = 0;
    blinkInterval = 2.4 + Math.random()*2.0;
  }
  // Kapanma anı
  const phase = Math.min(1, blinkTimer/0.12);
  const close = Math.sin(Math.PI*phase);
  // ilk 0.12s kapanış, sonra açılma (aynı eğri)
  const s = blinkTimer < .12 ? (1 - close*0.95) :
            (blinkTimer < .24 ? (0.05 + close*0.95) : 1);
  return s;
}

let tPrev = performance.now()/1000;
let tTotal = 0;
const pointer = {x: innerWidth/2, y: innerHeight/2};
addEventListener('pointermove', e => { pointer.x = e.clientX; pointer.y = e.clientY; }, {passive:true});
addEventListener('pointerdown', e => { spawnHeart(e.clientX, e.clientY); });

// Ana çizim döngüsü
function draw(){
  const tNow = performance.now()/1000;
  const dt = Math.min(0.033, tNow - tPrev);
  tPrev = tNow;
  tTotal += dt;

  const {cx, cy, R} = sceneSize();

  // arkaplana minik parıltılar
  ctx.clearRect(0,0,innerWidth,innerHeight);
  for(let i=0;i<16;i++){
    const x = (i*113 % innerWidth);
    const y = (i*57  % innerHeight);
    const g = ctx.createRadialGradient(x,y,0,x,y,140);
    g.addColorStop(0,'rgba(255,255,255,.07)');
    g.addColorStop(1,'rgba(255,255,255,0)');
    ctx.fillStyle = g;
    ctx.beginPath(); ctx.arc(x,y,140,0,Math.PI*2); ctx.fill();
  }

  // zemin gölge
  ctx.fillStyle = 'rgba(0,0,0,.28)';
  ctx.beginPath();
  ctx.ellipse(cx, cy + R*0.9, R*1.35, R*0.16, 0, 0, Math.PI*2);
  ctx.fill();

  // “nefes” için gövde ölçeği
  const breathe = 1 + Math.sin(tTotal*2.1)*0.018;

  // gövde (mavi gradient)
  const gBody = ctx.createRadialGradient(cx, cy - R*0.3, R*0.2, cx, cy, R*breathe);
  gBody.addColorStop(0, col.furLite);
  gBody.addColorStop(0.45, col.skin);
  gBody.addColorStop(1, col.furMid);
  ctx.fillStyle = gBody;
  ctx.beginPath();
  ctx.arc(cx, cy, R*breathe, 0, Math.PI*2);
  ctx.fill();

  // ——— Tüyler (binlerce kıl) ———
  // Halka etrafı: açısal dağılım
  ctx.lineCap = 'round';
  for (let i=0;i<HAIR_COUNT_RING;i++){
    const a = (i/HAIR_COUNT_RING) * Math.PI*2;
    const baseR = R*(0.95 + Math.sin(i*12.3)*0.01);
    const x0 = cx + Math.cos(a)*baseR;
    const y0 = cy + Math.sin(a)*baseR;

    // Noise ile dışa eğimli, hafif kıvrılan kıl
    const dir = a + (fnoise(Math.cos(a)*2, Math.sin(a)*2, tTotal*0.8))*0.6;
    const kLen = HAIR_LEN * (0.9 + Math.random()*0.35);
    const x1 = x0 + Math.cos(dir)*kLen;
    const y1 = y0 + Math.sin(dir)*kLen;

    const midX = (x0+x1)/2 + Math.cos(dir+Math.PI/2)* (6 * fnoise(i*0.02, tTotal*1.2));
    const midY = (y0+y1)/2 + Math.sin(dir+Math.PI/2)* (6 * fnoise(i*0.02+10, tTotal*1.2));

    // renk gradyanı
    const gr = ctx.createLinearGradient(x0,y0,x1,y1);
    gr.addColorStop(0,col.furLite);
    gr.addColorStop(0.5,col.furMid);
    gr.addColorStop(1,col.furDark);

    ctx.strokeStyle = gr;
    ctx.lineWidth = 1.2;
    ctx.beginPath();
    ctx.moveTo(x0,y0);
    ctx.quadraticCurveTo(midX, midY, x1, y1);
    ctx.stroke();
  }

  // İç kısımda rastgele tüyler (hacim etkisi)
  for (let i=0;i<HAIR_COUNT_CENTER;i++){
    const r = Math.sqrt(Math.random()) * (R*0.9);
    const a = Math.random()*Math.PI*2;
    const x0 = cx + Math.cos(a)*r;
    const y0 = cy + Math.sin(a)*r;
    const dir = a + Math.PI/2 + fnoise(x0*0.02, y0*0.02, tTotal*0.7)*0.8;
    const L = (HAIR_LEN*0.55) * (0.5 + (r/R));
    const x1 = x0 + Math.cos(dir)*L;
    const y1 = y0 + Math.sin(dir)*L;

    ctx.strokeStyle = 'rgba(145,217,255,.30)'; // yumuşak iç tüy
    ctx.lineWidth = 1.1;
    ctx.beginPath();
    ctx.moveTo(x0,y0);
    ctx.lineTo(x1,y1);
    ctx.stroke();
  }

  // Göbek parıltısı (yumuşak)
  const gBelly = ctx.createRadialGradient(cx, cy-R*0.08, R*0.1, cx, cy, R*0.85);
  gBelly.addColorStop(0, 'rgba(255,255,255,.35)');
  gBelly.addColorStop(1, 'rgba(255,255,255,0)');
  ctx.fillStyle = gBelly;
  ctx.beginPath(); ctx.arc(cx, cy, R*0.95, 0, Math.PI*2); ctx.fill();

  // ——— Gözler ———
  const eyeSep = R*0.62;      // göz arası
  const eyeR   = R*0.38;      // göz beyazı yarıçap
  const irisR  = eyeR*0.55;
  const pupilR = irisR*0.5;

  // Blink ölçeği
  const sY = eyeScaleY(dt);

  // Pupil hedefi: pointer'ın konumuna bak
  const lookDX = (pointer.x - cx) * 0.02 / (R*0.6);
  const lookDY = (pointer.y - (cy - R*0.1)) * 0.02 / (R*0.6);
  function drawEye(ex, ey){
    // göz çukuru (koyu)
    ctx.fillStyle = 'rgba(10,29,51,.55)';
    ctx.beginPath(); ctx.ellipse(ex, ey, eyeR, eyeR*1.12, 0, 0, Math.PI*2); ctx.fill();

    // beyaz – blink
    ctx.save();
    ctx.translate(ex,ey);
    ctx.scale(1, sY);
    ctx.fillStyle = col.white;
    ctx.beginPath(); ctx.ellipse(0, 0, eyeR, eyeR, 0, 0, Math.PI*2); ctx.fill();
    ctx.restore();

    // iris
    const ix = ex + Math.max(-eyeR*0.35, Math.min(eyeR*0.35, lookDX*eyeR));
    const iy = ey + Math.max(-eyeR*0.35, Math.min(eyeR*0.35, lookDY*eyeR));
    const gI = ctx.createRadialGradient(ix-irisR*0.25, iy-irisR*0.25, irisR*0.2, ix, iy, irisR);
    gI.addColorStop(0, '#91d9ff');
    gI.addColorStop(.5, '#1aa1ff');
    gI.addColorStop(1, '#0e5a98');
    ctx.fillStyle = gI;
    ctx.beginPath(); ctx.arc(ix,iy, irisR, 0, Math.PI*2); ctx.fill();

    // pupil
    ctx.fillStyle = col.eye;
    ctx.beginPath(); ctx.arc(ix,iy, pupilR, 0, Math.PI*2); ctx.fill();

    // parlama
    ctx.fillStyle = 'rgba(255,255,255,.92)';
    ctx.beginPath(); ctx.arc(ix - pupilR*0.6, iy - pupilR*0.6, pupilR*0.35, 0, Math.PI*2); ctx.fill();
    ctx.beginPath(); ctx.arc(ix - pupilR*0.2, iy - pupilR*0.2, pupilR*0.12, 0, Math.PI*2); ctx.fill();
  }

  drawEye(cx - eyeSep/2, cy - R*0.25);
  drawEye(cx + eyeSep/2, cy - R*0.25);

  // Kaş
  ctx.strokeStyle = 'rgba(12,34,58,.9)';
  ctx.lineWidth = 10;
  ctx.lineCap = 'round';
  ctx.beginPath();
  ctx.moveTo(cx - eyeSep/2 - eyeR*0.6, cy - R*0.58);
  ctx.lineTo(cx - eyeSep/2 + eyeR*0.3, cy - R*0.62);
  ctx.stroke();
  ctx.beginPath();
  ctx.moveTo(cx + eyeSep/2 - eyeR*0.3, cy - R*0.62);
  ctx.lineTo(cx + eyeSep/2 + eyeR*0.6, cy - R*0.58);
  ctx.stroke();

  // Burun & ağız
  ctx.fillStyle = col.eye;
  ctx.beginPath(); ctx.arc(cx, cy - R*0.02, R*0.095, 0, Math.PI*2); ctx.fill();
  ctx.fillStyle = '#52ff9a';
  ctx.beginPath(); ctx.arc(cx, cy - R*0.02, R*0.035, 0, Math.PI*2); ctx.fill();

  ctx.strokeStyle = '#0b1f36';
  ctx.lineWidth = 6;
  ctx.beginPath();
  ctx.moveTo(cx - R*0.11, cy + R*0.12);
  ctx.quadraticCurveTo(cx, cy + R*0.17, cx + R*0.11, cy + R*0.12);
  ctx.stroke();

  // Yanak pembelikleri
  ctx.fillStyle = col.pink;
  ctx.beginPath(); ctx.arc(cx - eyeSep*0.55, cy + R*0.08, R*0.09, 0, Math.PI*2); ctx.fill();
  ctx.beginPath(); ctx.arc(cx + eyeSep*0.55, cy + R*0.08, R*0.09, 0, Math.PI*2); ctx.fill();

  // Kalpler
  for (let i=hearts.length-1;i>=0;i--){
    const h = hearts[i];
    h.x += h.vx* (60*dt);
    h.y += h.vy* (60*dt);
    h.vy -= 0.01;
    h.life -= dt*0.6;
    if (h.life <= 0) { hearts.splice(i,1); continue; }
    drawHeart(h.x, h.y, h.r, h.life);
  }

  requestAnimationFrame(draw);
}
requestAnimationFrame(draw);

// Kalp çizimi
function drawHeart(x,y,r,alpha=1){
  ctx.save();
  ctx.translate(x,y);
  ctx.scale(1,1);
  ctx.globalAlpha = Math.max(0, Math.min(1, alpha));
  ctx.fillStyle = '#ff84b0';
  ctx.beginPath();
  ctx.moveTo(0, r*0.6);
  ctx.bezierCurveTo(r*1.2, r*-0.3, r*1.0, r*-1.4, 0, r*-0.6);
  ctx.bezierCurveTo(r*-1.0, r*-1.4, r*-1.2, r*-0.3, 0, r*0.6);
  ctx.fill();
  ctx.restore();
}
</script>
</body>
</html>
